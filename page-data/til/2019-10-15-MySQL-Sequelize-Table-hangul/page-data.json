{"componentChunkName":"component---src-templates-blog-post-js","path":"/til/2019-10-15-MySQL-Sequelize-Table-hangul/","result":{"data":{"site":{"siteMetadata":{"title":"TIL","author":"[Suho]","siteUrl":"https://gatsby-starter-bee.netlify.com","comment":{"disqusShortName":"","utterances":"angelxtry/blog-comment"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"3f52bdf1-21c6-563e-a73e-4fb32e4a79ec","excerpt":"MySQL, Sequelize를 이용하여 insert를 사용할 때 다음과 같은 에러가 발생할 때가 있다. 원인 MySQL 테이블 생성 시 character set이 으로 되어 있어 한글 데이터를 저장하려고 하면 발생하는 에러다. 해결 방법 해당 Database의 기본 character set을 변경하거나, 문제가 되는 Table의 charater set을 변경한다. 일단 Table의 character set을 확인해보자. 이렇게 query를 실행하면 table…","html":"<p>MySQL, Sequelize를 이용하여 insert를 사용할 때 다음과 같은 에러가 발생할 때가 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">Error<span class=\"token punctuation\">:</span> Incorrect string value<span class=\"token punctuation\">:</span> <span class=\"token string\">'\\xEC\\x9D...'</span> <span class=\"token keyword\">for</span> column <span class=\"token string\">'COLUMN NAME'</span> at row <span class=\"token number\">1</span></code></pre></div>\n<h2 id=\"원인\"><a href=\"#%EC%9B%90%EC%9D%B8\" aria-label=\"원인 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>원인</h2>\n<p>MySQL 테이블 생성 시 character set이 <code class=\"language-text\">latin1</code>으로 되어 있어 한글 데이터를 저장하려고 하면 발생하는 에러다.</p>\n<h2 id=\"해결-방법\"><a href=\"#%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95\" aria-label=\"해결 방법 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>해결 방법</h2>\n<p>해당 Database의 기본 character set을 변경하거나, 문제가 되는 Table의 charater set을 변경한다.</p>\n<p>일단 Table의 character set을 확인해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SHOW</span> <span class=\"token keyword\">FULL</span> <span class=\"token keyword\">COLUMNS</span> <span class=\"token keyword\">FROM</span> <span class=\"token keyword\">table</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이렇게 query를 실행하면 table 테이블의 상세 정보가 출력된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">+-----------+--------------+--------------------+------+-----+---------+----------------+---------------------------------+---------+\n| Field     | Type         | Collation          | Null | Key | Default | Extra          | Privileges                      | Comment |\n+-----------+--------------+--------------------+------+-----+---------+----------------+---------------------------------+---------+\n| id        | int(11)      | NULL               | NO   | PRI | NULL    | auto_increment | select,insert,update,references |         |\n| email     | varchar(50)  | latin1 | YES  | UNI | NULL    |                | select,insert,update,references |         |\n| nick      | varchar(50)  | latin1 | NO   |     | NULL    |                | select,insert,update,references |         |\n| password  | varchar(100) | latin1 | YES  |     | NULL    |                | select,insert,update,references |         |\n| provider  | varchar(10)  | latin1 | NO   |     | local   |                | select,insert,update,references |         |\n| snsId     | varchar(50)  | latin1 | YES  |     | NULL    |                | select,insert,update,references |         |\n| createdAt | datetime     | NULL               | NO   |     | NULL    |                | select,insert,update,references |         |\n| updatedAt | datetime     | NULL               | NO   |     | NULL    |                | select,insert,update,references |         |\n| deletedAt | datetime     | NULL               | YES  |     | NULL    |                | select,insert,update,references |         |\n+-----------+--------------+--------------------+------+-----+---------+----------------+---------------------------------+---------+</code></pre></div>\n<p>해당 테이블을 정의한 <code class=\"language-text\">models/table_name.js</code> 파일에 character set 관련 내용을 추가한다.(sequelize 사용)</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n  timestamps<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  paranoid<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  charset<span class=\"token punctuation\">:</span> <span class=\"token string\">\"utf8mb4\"</span><span class=\"token punctuation\">,</span>\n  collate<span class=\"token punctuation\">:</span> <span class=\"token string\">\"utf8mb4_general_ci\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>해당 테이블을 drop하고 다시 생성하면 <code class=\"language-text\">latin1</code> 이었던 컬럼이 <code class=\"language-text\">utf8mb4_general_ci</code>으로 변경된 것을 확인할 수 있다.</p>\n<p>한글을 저장해보면 잘 처리된다.</p>","frontmatter":{"title":"MySQL, Sqeuelize 사용 시 한글 character set 문제","date":"October 15, 2019"}}},"pageContext":{"slug":"/til/2019-10-15-MySQL-Sequelize-Table-hangul/","previous":{"fields":{"slug":"/til/2019-10-02-Express-Mysql-Sequelize-02/"},"frontmatter":{"title":"[Node.js] Express, Mysql, Sequelize #2","category":"TIL"}},"next":{"fields":{"slug":"/til/2019-10-17-TIL-2019-10-17/"},"frontmatter":{"title":"[TIL] 2019-10-17","category":"TIL"}}}}}