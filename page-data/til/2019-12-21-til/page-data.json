{"componentChunkName":"component---src-templates-blog-post-js","path":"/til/2019-12-21-til/","result":{"data":{"site":{"siteMetadata":{"title":"TIL","author":"[Suho]","siteUrl":"https://gatsby-starter-bee.netlify.com","comment":{"disqusShortName":"","utterances":"angelxtry/blog-comment"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"50333875-2ae6-5741-b3ed-c5052a45e69c","excerpt":"아. 또 1시를 넘어버렸네. 오늘은 Google 인증 후에 token을 만들어 cookie로 전달하는 코드를 작성했다. 아직 미진한 부분이 있어서 내일 좀 더 손을 봐야하다. access token과 refresh token의 역할도 명확하게 작성하려면 시간이 조금 더 필요할 것 같다. 중간에 build 후 실행해 볼 일이 생겼는데 갑자기 실행이 안됐다. TypeORM의 ormconfig.json 파일을 찾지 못한다는 에러 메시지만 계속 출력됐다. development, test…","html":"<p>아. 또 1시를 넘어버렸네.</p>\n<p>오늘은 Google 인증 후에 token을 만들어 cookie로 전달하는 코드를 작성했다.</p>\n<p>아직 미진한 부분이 있어서 내일 좀 더 손을 봐야하다.</p>\n<p>access token과 refresh token의 역할도 명확하게 작성하려면 시간이 조금 더 필요할 것 같다.</p>\n<p>중간에 build 후 실행해 볼 일이 생겼는데 갑자기 실행이 안됐다. TypeORM의 ormconfig.json 파일을 찾지 못한다는 에러 메시지만 계속 출력됐다. development, test 모두 잘 되는데 production만 안되는거다.</p>\n<p>원인을 확인해보니 내가 작성한 package.json script였다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"prod\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"NODE_ENV=production tsc &amp;&amp; node dist/index/js\"</span></code></pre></div>\n<p>tsc 때문에 &#x26;&#x26; 이후 명령에 NODE_ENV가 전달되지 않은 것이 문제였다 ㅠㅠ</p>\n<p>헐 이걸로 2시간 가까이 잡아먹었는데 너무 허탈했다. ㅋㅋㅋㅋㅋㅋ</p>\n<p>다음과 같이 변경했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"preprod\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"tsc\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token property\">\"prod\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"NODE_ENV=production node dist/index.js\"</span></code></pre></div>\n<p>잘된다. 아주 자알된다. ㅠㅠ ㅋㅋㅋㅋㅋㅋ</p>\n<p>삽질 그만하고 얼른 자자. 내일도 달려야 하니까.</p>","frontmatter":{"title":"2019-12-21 TIL","date":"December 22, 2019"}}},"pageContext":{"slug":"/til/2019-12-21-til/","previous":{"fields":{"slug":"/til/2019-12-20-til/"},"frontmatter":{"title":"2019-12-20 TIL","category":"TIL"}},"next":{"fields":{"slug":"/til/2019-12-22-til/"},"frontmatter":{"title":"2019-12-22 TIL","category":"TIL"}}}}}