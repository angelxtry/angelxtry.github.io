{"componentChunkName":"component---src-templates-blog-post-js","path":"/development/2021-03-22-ssh-agent-forwarding/","result":{"data":{"site":{"siteMetadata":{"title":"TIL","author":"[Suho]","siteUrl":"https://blog.doitreviews.com","comment":{"disqusShortName":"","utterances":"angelxtry/blog-comment"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"ac9c09dd-3ce4-5183-83cb-a330710d3638","excerpt":"개요 AWS에 VPC를 설정했다면 AWS의 주요 리소스는 public dns가 없기 때문에 개발자 장비에서 바로 접속할 수 없습니다. 보통 bastion 서버를 생성하여, bastion을 통해 접속합니다. bastion에 bastion을 통해 접속할 서버의 pem key를 저장하지 않고, 개발자 장비에만 두기 위해 ssh agent forwarding이라는 방식을 사용합니다. 이후 모든 내용은 MAC 기준으로 작성되었습니다. 처리방법 bastion, bastion을 통해 접속할 서버의 pem…","html":"<h2 id=\"개요\" style=\"position:relative;\"><a href=\"#%EA%B0%9C%EC%9A%94\" aria-label=\"개요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>개요</h2>\n<ul>\n<li>AWS에 VPC를 설정했다면 AWS의 주요 리소스는 public dns가 없기 때문에 개발자 장비에서 바로 접속할 수 없습니다.</li>\n<li>보통 bastion 서버를 생성하여, bastion을 통해 접속합니다.</li>\n<li>bastion에 bastion을 통해 접속할 서버의 pem key를 저장하지 않고, 개발자 장비에만 두기 위해 ssh agent forwarding이라는 방식을 사용합니다.</li>\n<li>이후 모든 내용은 MAC 기준으로 작성되었습니다.</li>\n</ul>\n<h2 id=\"처리방법\" style=\"position:relative;\"><a href=\"#%EC%B2%98%EB%A6%AC%EB%B0%A9%EB%B2%95\" aria-label=\"처리방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>처리방법</h2>\n<ul>\n<li>\n<p>bastion, bastion을 통해 접속할 서버의 pem key를 모두 local에 저장합니다.</p>\n<ul>\n<li>보통 ~/.ssh/perms 경로에 저장합니다.</li>\n</ul>\n</li>\n<li>\n<p>bastion에 대한 정보를 ~/.ssh/config에 입력합니다.</p>\n<ul>\n<li>입력 시 <code class=\"language-text\">ForwardAgent yes</code>를 추가합니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">## bastion\nHost bastion\n  HostName xxx\n  ForwardAgent yes\n  User xxx\n  <span class=\"token operator\">...</span></code></pre></div>\n</li>\n<li><code class=\"language-text\">ssh-add -l</code> 명령어로 bastion을 통해 접속할 서버의 pem key가 등록되어 있는지 확인합니다.</li>\n<li>\n<p>bastion을 통해 접속할 서버의 pem key가 등록되어 있지 않다면 다음의 명령어로 추가합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">ssh<span class=\"token operator\">-</span>add <span class=\"token operator\">-</span><span class=\"token constant\">K</span> <span class=\"token operator\">~</span><span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>ssh<span class=\"token operator\">/</span>perms<span class=\"token operator\">/</span>perm_key_name</code></pre></div>\n</li>\n<li>이제 bastion에 ssh로 접속한 후 private dns로 bastion을 통해 접속할 서버에 접속할 수 있습니다.</li>\n</ul>","frontmatter":{"title":"ssh agent forwarding","date":"March 22, 2021"}}},"pageContext":{"slug":"/development/2021-03-22-ssh-agent-forwarding/","previous":{"fields":{"slug":"/til/2021-03-10-til/"},"frontmatter":{"title":"2021-03-10 TIL","category":"til"}},"next":null}},"staticQueryHashes":["1763525275","3128451518"]}