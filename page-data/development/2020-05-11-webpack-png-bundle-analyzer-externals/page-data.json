{"componentChunkName":"component---src-templates-blog-post-js","path":"/development/2020-05-11-webpack-png-bundle-analyzer-externals/","result":{"data":{"site":{"siteMetadata":{"title":"TIL","author":"[Suho]","siteUrl":"https://gatsby-starter-bee.netlify.com","comment":{"disqusShortName":"","utterances":"angelxtry/blog-comment"},"sponsor":{"buyMeACoffeeId":""}}},"markdownRemark":{"id":"a5dac304-e5a7-5259-90a1-350d6049bd2c","excerpt":"관련 글 CRA 없이 React + TypeScript + Webpack 프로젝트 만들기 #1 CRA 없이 React + TypeScript + Webpack 프로젝트 만들기 #2 어제까지 설정했던 Webpack을 기반으로 CRA로 작성한 프로젝트를 Webpack으로 변경했다. 그 과정에서 추가 설정을 했거나, 삽질했던 내용을 적어둔다. 1. SVG가 아닌 PNG 파일을 처리하기 위한 file-loader 이번 프로젝트의 아이콘은 모두 SVG였지만 일부 이미지가 PNG였다. PNG…","html":"<p>관련 글</p>\n<p><a href=\"https://blog.doitreviews.com/development/2020-05-07-react-typescript-webpack/\">CRA 없이 React + TypeScript + Webpack 프로젝트 만들기 #1</a></p>\n<p><a href=\"https://blog.doitreviews.com/development/2020-05-11-webpack-dev-server-and-svg/\">CRA 없이 React + TypeScript + Webpack 프로젝트 만들기 #2</a></p>\n<hr>\n<p>어제까지 설정했던 Webpack을 기반으로 CRA로 작성한 프로젝트를 Webpack으로 변경했다.</p>\n<p>그 과정에서 추가 설정을 했거나, 삽질했던 내용을 적어둔다.</p>\n<h2 id=\"1-svg가-아닌-png-파일을-처리하기-위한-file-loader\" style=\"position:relative;\"><a href=\"#1-svg%EA%B0%80-%EC%95%84%EB%8B%8C-png-%ED%8C%8C%EC%9D%BC%EC%9D%84-%EC%B2%98%EB%A6%AC%ED%95%98%EA%B8%B0-%EC%9C%84%ED%95%9C-file-loader\" aria-label=\"1 svg가 아닌 png 파일을 처리하기 위한 file loader permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. SVG가 아닌 PNG 파일을 처리하기 위한 file-loader</h2>\n<p>이번 프로젝트의 아이콘은 모두 SVG였지만 일부 이미지가 PNG였다. PNG를 처리하는 설정을 webpack.config.js에 추가한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\n  test<span class=\"token operator\">:</span> <span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">\\.png$</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">,</span>\n  loader<span class=\"token operator\">:</span> <span class=\"token string\">'file-loader'</span><span class=\"token punctuation\">,</span>\n  options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    name<span class=\"token operator\">:</span> <span class=\"token string\">'images/[name].[ext]?[hash]'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>SVG를 처리했을 때와 동일하게 src/types/custom.d.ts 파일에 png 확장자를 처리할 수 있는 선언을 추가한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">declare</span> <span class=\"token keyword\">module</span> <span class=\"token string\">'*.svg'</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">import</span> React <span class=\"token operator\">=</span> <span class=\"token keyword\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'react'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> ReactComponent<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span><span class=\"token constant\">FC</span><span class=\"token operator\">&lt;</span>React<span class=\"token punctuation\">.</span>SVGProps<span class=\"token operator\">&lt;</span>SVGSVGElement<span class=\"token operator\">>></span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> src<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> src<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">declare</span> <span class=\"token keyword\">module</span> <span class=\"token string\">'*.png'</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> src<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> src<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>다음과 같이 사용할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> waterdropIconUrl<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> ReactComponent <span class=\"token keyword\">as</span> WaterdropIcon<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'./images/ic-btn-emo-waterdrop.svg'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> partyUrl <span class=\"token keyword\">from</span> <span class=\"token string\">'./images/party-8-240.png'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      React + TypeScript + Webpack!\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>waterdropIconUrl<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Waterdrop Icon<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">WaterdropIcon</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>partyUrl<span class=\"token punctuation\">}</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Party Icon<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"2-bundleanalyzerplugin\" style=\"position:relative;\"><a href=\"#2-bundleanalyzerplugin\" aria-label=\"2 bundleanalyzerplugin permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. BundleAnalyzerPlugin</h2>\n<p>production mode로 Webpack을 실행하여 bundle의 크기를 확인해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">Asset       Size  Chunks                    Chunk Names\napp<span class=\"token punctuation\">.</span>js    <span class=\"token number\">478</span> KiB       <span class=\"token number\">0</span>  <span class=\"token punctuation\">[</span>emitted<span class=\"token punctuation\">]</span>  <span class=\"token punctuation\">[</span>big<span class=\"token punctuation\">]</span>  app</code></pre></div>\n<p>최적화를 할 여지가 있을지 webpack-bundle-analyzer로 확인해볼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">yarn add <span class=\"token operator\">-</span><span class=\"token constant\">D</span> webpack<span class=\"token operator\">-</span>bundle<span class=\"token operator\">-</span>analyzer</code></pre></div>\n<p>webpack.config.js 에 추가한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">new</span> <span class=\"token class-name\">BundleAnalyzerPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  openAnalyzer<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  analyzerMode<span class=\"token operator\">:</span> <span class=\"token string\">'static'</span><span class=\"token punctuation\">,</span>\n  reportFilename<span class=\"token operator\">:</span> <span class=\"token string\">'../../report.html'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>openAnalyzer를 false로 설정하면 BundleAnalyzerPlugin가 실행된 후에 바로 브라우저에 결과가 출력되지 않도록 한다.</p>\n<p>analyzerMode, reportFilename을 위와 같이 설정하면 report.html 파일이 지정된 경로에 생성된다.</p>\n<p>report.html 파일을 브라우저로 확인해보면 다음과 같다.</p>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=19yr9Z2MYNGqvZ8tQ4BXGLLcZgKDAw0yC\" alt=\"최초 분석 결과\"></p>\n<p>react-spinners가 크게 비중을 차지하고 있다. 실제로 사용되는 코드를 확인해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> BeatLoader <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-spinners'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이 코드를 다음과 같이 변경하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> BeatLoader <span class=\"token keyword\">from</span> <span class=\"token string\">'react-spinners/BeatLoader'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>위와 같이 코드를 수정한 후 다시 webpack을 실행해보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">Asset       Size  Chunks                    Chunk Names\napp<span class=\"token punctuation\">.</span>js    <span class=\"token number\">418</span> KiB       <span class=\"token number\">0</span>  <span class=\"token punctuation\">[</span>emitted<span class=\"token punctuation\">]</span>  <span class=\"token punctuation\">[</span>big<span class=\"token punctuation\">]</span>  app</code></pre></div>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=19_SMQfGBGNKE_ZW2x7o3EYPCZlmliyXN\" alt=\"react-spinners 최적화\"></p>\n<p>size가 약 60Kb 줄어들었고 이미지에서 볼륨이 작아진 것을 알 수 있다.</p>\n<h2 id=\"3-externals-copyplugin\" style=\"position:relative;\"><a href=\"#3-externals-copyplugin\" aria-label=\"3 externals copyplugin permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. externals, CopyPlugin</h2>\n<p>axios 같은 library는 bundle에서 별도로 분리할 수 있다.</p>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=10DKW44LeWGCcOoFzRmiSyGyUceLV6MHa\" alt=\"axios 분리 전\"></p>\n<p>Webpack의 externals 키워드와 copy-webpack-plugin을 활용한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">yarn add <span class=\"token operator\">-</span><span class=\"token constant\">D</span> copy<span class=\"token operator\">-</span>webpack<span class=\"token operator\">-</span>plugin</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token keyword\">new</span> <span class=\"token class-name\">HtmlWebpackPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    template<span class=\"token operator\">:</span> <span class=\"token string\">'./src/index.html'</span><span class=\"token punctuation\">,</span>\n    templateParameters<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      env<span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">===</span> <span class=\"token string\">'production'</span> <span class=\"token operator\">?</span> <span class=\"token string\">''</span> <span class=\"token operator\">:</span> <span class=\"token string\">'[DEV]'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    minify<span class=\"token operator\">:</span>\n      process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">===</span> <span class=\"token string\">'production'</span>\n        <span class=\"token operator\">?</span> <span class=\"token punctuation\">{</span>\n            collapseWhitespace<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n            removeComments<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">new</span> <span class=\"token class-name\">CleanWebpackPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">new</span> <span class=\"token class-name\">BundleAnalyzerPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    openAnalyzer<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    analyzerMode<span class=\"token operator\">:</span> <span class=\"token string\">'static'</span><span class=\"token punctuation\">,</span>\n    reportFilename<span class=\"token operator\">:</span> <span class=\"token string\">'../../report.html'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">new</span> <span class=\"token class-name\">CopyPlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">from</span><span class=\"token operator\">:</span> <span class=\"token string\">'./node_modules/axios/dist/axios.min.js'</span><span class=\"token punctuation\">,</span>\n      to<span class=\"token operator\">:</span> <span class=\"token string\">'./axios.min.js'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\nexternals<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  axios<span class=\"token operator\">:</span> <span class=\"token string\">'axios'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>위와 같이 설정한 후 src/index.html 파일에 axios를 로드하는 코드를 추가한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\"><span class=\"token punctuation\">&lt;!</span><span class=\"token doctype-tag\">DOCTYPE</span> <span class=\"token name\">html</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>UTF-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>viewport<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>width=device-width, initial-scale=1.0<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>Document&lt;%= env %><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>root<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text/javascript<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/axios.min.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>webpack을 다시 실행하면 bundle size가 더 줄어든 것을 확인할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">Asset       Size  Chunks                    Chunk Names\napp<span class=\"token punctuation\">.</span>js    <span class=\"token number\">405</span> KiB       <span class=\"token number\">0</span>  <span class=\"token punctuation\">[</span>emitted<span class=\"token punctuation\">]</span>  <span class=\"token punctuation\">[</span>big<span class=\"token punctuation\">]</span>  app</code></pre></div>\n<p><img src=\"https://drive.google.com/uc?export=view&#x26;id=1fDA4612lhFAviVJ8sAh77vSbvYe0hzMG\" alt=\"axios 분리 후\"></p>\n<p>용량이 약 13kb 줄어들었고 이미지에서 axios는 사라졌다.</p>\n<p>externals로 의존성을 분리하는 것은 확인해보지는 못했지만 더 다양한 기능이 있는 것 같다.</p>\n<p>index.html에 수동으로 axio를 추가하지 않는 방법도 있을 것 같은데…</p>\n<h2 id=\"느낀-점-배운-것\" style=\"position:relative;\"><a href=\"#%EB%8A%90%EB%82%80-%EC%A0%90-%EB%B0%B0%EC%9A%B4-%EA%B2%83\" aria-label=\"느낀 점 배운 것 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>느낀 점, 배운 것</h2>\n<p>아직 배포까지는 진행하지 않았지만 로컬에서 CRA를 Wabpack으로 대체하는 과정이 잘 처리되어서 기쁘다.</p>\n<p>최적화 방법이 더 있다는 것을 자료를 찾아보면서 확인했지만 일단은 여기까지만 적용하려고 한다.</p>\n<p>앞으로 개인 프로젝트를 할 때는 CRA를 쓰지 않고 Webpack 써야지~</p>","frontmatter":{"title":"CRA 없이 React + TypeScript + Webpack 프로젝트 만들기 #3","date":"May 12, 2020"}}},"pageContext":{"slug":"/development/2020-05-11-webpack-png-bundle-analyzer-externals/","previous":{"fields":{"slug":"/development/2020-05-11-webpack-dev-server-and-svg/"},"frontmatter":{"title":"CRA 없이 React + TypeScript + Webpack 프로젝트 만들기 #2","category":"development"}},"next":{"fields":{"slug":"/til/2020-05-12-til/"},"frontmatter":{"title":"2020-05-12 TIL","category":"til"}}}},"staticQueryHashes":["3128451518","96099027"]}